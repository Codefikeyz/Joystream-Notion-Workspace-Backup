# Staging Environment

| Pioneer | [https://dao-git-staging-joystream.vercel.app/?config=https://3.95.67.177.nip.io/network/config.json](https://dao-git-staging-joystream.vercel.app/?config=https://3.95.67.177.nip.io/network/config.json) |
| --- | --- |
| RPC | wss://18.207.235.254.nip.io/ws-rpc |
| Query Node | https://18.207.235.254.nip.io/query-node/server/graphql |

Chain spec:

[chainspec-balances-raw.json](Staging%20Environment/chainspec-balances-raw.json)

[https://dao-git-staging-joystream.vercel.app/](https://dao-git-staging-joystream.vercel.app/)[#/settings?network-config=https://18.207.235.254.nip.io/network/config.json](https://pioneer-2.vercel.app/#/settings?network-config=https://18.207.235.254.nip.io/network/config.json)

### Setting up the staging network

Rent a non-expensive VPS server and ssh to it. 

Clone the Joystream monorepo: `git clone[https://github.com/Joystream/joystream.git](https://github.com/Joystream/joystream.git)`

Execute two commands, one after another:

```bash
cd joystream && setup.sh
```

```bash
WASM_BUILD_TOOLCHAIN=nightly-2021-02-20 cargo +nightly-2021-02-20 build --release
```

ğŸŒÂ ğŸŒÂ ğŸŒÂ ğŸŒÂ ğŸŒÂ These command take a while, so have patience. If no errors are produced and the commands finish successfully, proceed with next step.

```bash
cd target/release
```

In this folder, observe the file `joystream-node`, which is the main node binary compiled. This file is executable, and has many different functions. 

Generate the first key. Copy the seed phrase in the safe place

```bash
./joystream-node key generate --scheme Sr25519 --password-interactive
Key password:
Secret phrase arrow apple satoshi adult session behind ripple pass awful viable exist join is account:
Secret seed:      0x029421496e692ba648803128a5da36cf9d41d1e9cc467aa3ac9e7096ada225dd
Public key (hex): 0xa06414cf3eea17b7c53c4a828d8d33272f17da27ab1863f9b08f63bf68160930
Account ID:       0xa06414cf3eea17b7c53c4a828d8345272f17da27ab5867f9b08f63bf68160930
SS58 Address:     5Fh1FQ7KM4Qkm1PGR86NkXKwP4JsNtwVoy5gYjydDBy7hGRq
```

In future, if you ever need to recover the secret seed and all other data knowing secret 12 word phrase, use this command: 

```bash
./joystream-node key inspect-key --password-interactive --scheme Ed25519 "arrow apple satoshi adult session behind ripple pass awful viable exist join"
```

Export the local chain spec:

```bash
./joystream-node build-spec --disable-default-bootnode --chain local > customSpec.json
```

Make the following edits: 

1. palletStaking.validatorCount = 2
2. invulnerables - add two 

"palletStaking": {
"historyDepth": 336,
"validatorCount": **2**,
"minimumValidatorCount": 2,
"invulnerables": [
"`replace with validator1 address`",
"`replace with validator2 address`"
],
"forceEra": "NotForcing",
"slashRewardFraction": 100000000,
"canceledPayout": 0,
"stakers": [
[
"`replace with validator1 address`",
"5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY",
5000,
"Validator"
],
[
"`replace with validator2 address`",
"5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty",
5000,
"Validator"
]
]
},

"palletSession": {
"keys": [
[
"`replace with validator1 address`",
"`replace with validator1 address`",
{
"grandpa": "`replace with grandpa1 address`",
"babe": "5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY",
"im_online": "5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY",
"authority_discovery": "5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY"
}
],
[
"`replace with validator2 address`",
"`replace with validator2 address`",
{
"grandpa": "`replace with grandpa2 address`",
"babe": "5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty",
"im_online": "5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty",
"authority_discovery": "5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty"
}
]
]
},

"palletSudo": {
"key": "`replace with sudo address`"
},

./joystream-node build-spec --chain=customSpec.json --raw --disable-default-bootnode > customSpecRaw.json
ğŸ‘‡ğŸ¼

May 04 09:49:01.642  INFO ğŸ’¸ new validator set of size 2 has been elected via ElectionCompute::OnChain for era 0

insert keys to keystore: